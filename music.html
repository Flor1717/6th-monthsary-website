<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Background Music</title>
</head>
<body>
  <audio id="bg-music" autoplay loop>
    <source src="valentines_day.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <script>
    const music = document.getElementById("bg-music");

    // Restore music time
    const savedTime = localStorage.getItem("musicTime");
    if (savedTime) music.currentTime = parseFloat(savedTime);

    const tryPlay = () => {
      music.play().catch(() => {
        document.body.addEventListener("click", () => music.play(), { once: true });
      });
    };

    window.addEventListener("load", tryPlay);

    window.addEventListener("beforeunload", () => {
      localStorage.setItem("musicTime", music.currentTime);
    });
  </script>
</body>
</html>
